<?xml version="1.0" encoding="utf-8"?>
<!--Autogenerated by PropelSchemaReverseTask class.-->
<database name="codeshop" defaultIdMethod="native">
  <table name="code" phpName="Code" idMethod="native">
    <column name="id" phpName="Id" type="INTEGER" primaryKey="true" autoIncrement="true" required="true"/>
    <column name="user_id" phpName="UserId" type="INTEGER" required="true"/>
    <column name="offer_id" phpName="OfferId" type="INTEGER" required="true"/>
    <column name="filename" phpName="Filename" type="VARCHAR" size="200" required="true"/>
    <column name="filesize" phpName="Filesize" type="INTEGER" required="true" defaultValue="0"/>
    <column name="mimetype" phpName="Mimetype" type="VARCHAR" size="200" required="true"/>
    <column name="content" phpName="Content" type="BLOB" required="true"/>
    <column name="active" phpName="Active" type="BOOLEAN" size="1" required="true" defaultValue="true"/>
    <foreign-key foreignTable="user" name="code_user" onDelete="RESTRICT" onUpdate="RESTRICT">
      <reference local="user_id" foreign="id"/>
    </foreign-key>
    <foreign-key foreignTable="offer" name="code_offer" onDelete="RESTRICT" onUpdate="RESTRICT">
      <reference local="offer_id" foreign="id"/>
    </foreign-key>
    <index name="code_user">
      <index-column name="user_id"/>
    </index>
    <index name="code_offer">
      <index-column name="offer_id"/>
    </index>
    <vendor type="mysql">
      <parameter name="Engine" value="InnoDB"/>
    </vendor>
    <behavior name="timestampable" />
  </table>
  <table name="review" phpName="Review" idMethod="native">
    <column name="id" phpName="Id" type="INTEGER" primaryKey="true" autoIncrement="true" required="true"/>
    <column name="user_id" phpName="UserId" type="INTEGER" required="true"/>
    <column name="product_id" phpName="ProductId" type="INTEGER" required="true"/>
    <column name="text" phpName="Text" type="VARCHAR" size="500" required="true"/>
    <column name="rating" phpName="Rating" type="INTEGER" required="true" defaultValue="0"/>
    <column name="active" phpName="Active" type="BOOLEAN" size="1" required="true" defaultValue="true"/>
    <foreign-key foreignTable="user" name="review_user" onDelete="RESTRICT" onUpdate="RESTRICT">
      <reference local="user_id" foreign="id"/>
    </foreign-key>
    <foreign-key foreignTable="product" name="review_product" onDelete="RESTRICT" onUpdate="RESTRICT">
      <reference local="product_id" foreign="id"/>
    </foreign-key>
    <index name="review_user">
      <index-column name="user_id"/>
    </index>
    <index name="review_product">
      <index-column name="product_id"/>
    </index>
    <vendor type="mysql">
      <parameter name="Engine" value="InnoDB"/>
    </vendor>
    <behavior name="timestampable" />
  </table>
  <table name="offer" phpName="Offer" idMethod="native">
    <column name="id" phpName="Id" type="INTEGER" primaryKey="true" autoIncrement="true" required="true"/>
    <column name="product_id" phpName="ProductId" type="INTEGER" required="true"/>
    <column name="price" phpName="Price" type="INTEGER" required="true" defaultValue="0"/>
    <column name="active" phpName="Active" type="BOOLEAN" size="1" required="true" defaultValue="true"/>
    <foreign-key foreignTable="product" name="offer_product" onDelete="RESTRICT" onUpdate="RESTRICT">
      <reference local="product_id" foreign="id"/>
    </foreign-key>
    <index name="offer_product">
      <index-column name="product_id"/>
    </index>
    <vendor type="mysql">
      <parameter name="Engine" value="InnoDB"/>
    </vendor>
    <behavior name="timestampable" />
  </table>
  <table name="offer_tag" phpName="OfferTag" isCrossRef="true" idMethod="native">
    <column name="id" phpName="Id" type="INTEGER" primaryKey="true" autoIncrement="true" required="true"/>
    <column name="offer_id" phpName="OfferId" type="INTEGER" required="true"/>
    <column name="tag_id" phpName="TagId" type="INTEGER" required="true"/>
    <foreign-key foreignTable="offer" name="offer_tag_offer" onDelete="RESTRICT" onUpdate="RESTRICT">
      <reference local="offer_id" foreign="id"/>
    </foreign-key>
    <foreign-key foreignTable="tag" name="offer_tag_tag" onDelete="RESTRICT" onUpdate="RESTRICT">
      <reference local="tag_id" foreign="id"/>
    </foreign-key>
    <index name="offer_tag_offer">
      <index-column name="offer_id"/>
    </index>
    <index name="offer_tag_tag">
      <index-column name="tag_id"/>
    </index>
    <vendor type="mysql">
      <parameter name="Engine" value="InnoDB"/>
    </vendor>
  </table>
  <table name="order" phpName="Order" idMethod="native">
    <column name="id" phpName="Id" type="INTEGER" primaryKey="true" autoIncrement="true" required="true"/>
    <column name="user_id" phpName="UserId" type="INTEGER" required="true"/>
    <column name="offer_id" phpName="OfferId" type="INTEGER" required="true"/>
    <column name="paid_price" phpName="PaidPrice" type="INTEGER" required="true" defaultValue="0"/>
    <column name="active" phpName="Active" type="BOOLEAN" size="1" required="true" defaultValue="true"/>
    <foreign-key foreignTable="user" name="order_user" onDelete="RESTRICT" onUpdate="RESTRICT">
      <reference local="user_id" foreign="id"/>
    </foreign-key>
    <foreign-key foreignTable="offer" name="order_offer" onDelete="RESTRICT" onUpdate="RESTRICT">
      <reference local="offer_id" foreign="id"/>
    </foreign-key>
    <index name="order_user">
      <index-column name="user_id"/>
    </index>
    <index name="order_offer">
      <index-column name="offer_id"/>
    </index>
    <vendor type="mysql">
      <parameter name="Engine" value="InnoDB"/>
    </vendor>
    <behavior name="timestampable" />
  </table>
  <table name="product" phpName="Product" idMethod="native">
    <column name="id" phpName="Id" type="INTEGER" primaryKey="true" autoIncrement="true" required="true"/>
    <column name="name" phpName="Name" type="VARCHAR" size="200" required="true"/>
    <column name="description" phpName="Description" type="VARCHAR" size="1000" required="true"/>
    <column name="active" phpName="Active" type="BOOLEAN" size="1" required="true" defaultValue="true"/>
    <vendor type="mysql">
      <parameter name="Engine" value="InnoDB"/>
    </vendor>
    <behavior name="timestampable" />
    <behavior name="aggregate_column">
      <parameter name="name" value="avg_rating" />
      <parameter name="foreign_table" value="review" />
      <parameter name="expression" value="AVG(rating)" />
    </behavior>
    <behavior name="i18n">
      <parameter name="i18n_columns" value="name, description" />
    </behavior>
  </table>
  <table name="product_tag" phpName="ProductTag" isCrossRef="true" idMethod="native">
    <column name="id" phpName="Id" type="INTEGER" primaryKey="true" autoIncrement="true" required="true"/>
    <column name="product_id" phpName="ProductId" type="INTEGER" required="true"/>
    <column name="tag_id" phpName="TagId" type="INTEGER" required="true"/>
    <foreign-key foreignTable="product" name="product_tag_product" onDelete="RESTRICT" onUpdate="RESTRICT">
      <reference local="product_id" foreign="id"/>
    </foreign-key>
    <foreign-key foreignTable="tag" name="product_tag_tag" onDelete="RESTRICT" onUpdate="RESTRICT">
      <reference local="tag_id" foreign="id"/>
    </foreign-key>
    <index name="product_tag_product">
      <index-column name="product_id"/>
    </index>
    <index name="product_tag_tag">
      <index-column name="tag_id"/>
    </index>
    <vendor type="mysql">
      <parameter name="Engine" value="InnoDB"/>
    </vendor>
  </table>
  <table name="tag" phpName="Tag" idMethod="native">
    <column name="id" phpName="Id" type="INTEGER" primaryKey="true" autoIncrement="true" required="true"/>
    <column name="type_id" phpName="TypeId" type="INTEGER" required="true"/>
    <column name="parent_id" phpName="ParentId" type="INTEGER" required="false"/>
    <column name="name" phpName="Name" type="VARCHAR" size="200" required="true"/>
    <column name="active" phpName="Active" type="BOOLEAN" size="1" required="true" defaultValue="true"/>
    <foreign-key foreignTable="tag" name="tag_tag" onDelete="RESTRICT" onUpdate="RESTRICT">
      <reference local="parent_id" foreign="id"/>
    </foreign-key>
    <foreign-key foreignTable="tag_type" name="tag_tag_type" onDelete="RESTRICT" onUpdate="RESTRICT">
      <reference local="type_id" foreign="id"/>
    </foreign-key>
    <index name="tag_tag">
      <index-column name="parent_id"/>
    </index>
    <index name="tag_tag_type">
      <index-column name="type_id"/>
    </index>
    <vendor type="mysql">
      <parameter name="Engine" value="InnoDB"/>
    </vendor>
    <behavior name="timestampable" />
    <behavior name="i18n">
      <parameter name="i18n_columns" value="name" />
    </behavior>
  </table>
  <table name="tag_type" phpName="TagType" idMethod="native">
    <column name="id" phpName="Id" type="INTEGER" primaryKey="true" autoIncrement="true" required="true"/>
    <column name="name" phpName="Name" type="VARCHAR" size="200" required="true"/>
    <column name="active" phpName="Active" type="BOOLEAN" size="1" required="true" defaultValue="true"/>
    <vendor type="mysql">
      <parameter name="Engine" value="InnoDB"/>
    </vendor>
    <behavior name="timestampable" />
    <behavior name="i18n">
      <parameter name="i18n_columns" value="name" />
    </behavior>
  </table>
  <table name="user" phpName="User" idMethod="native">
    <column name="id" phpName="Id" type="INTEGER" primaryKey="true" autoIncrement="true" required="true"/>
    <column name="email" phpName="Email" type="VARCHAR" size="100" required="true"/>
    <column name="token" phpName="Token" type="VARCHAR" size="100" required="true"/>
    <column name="credits" phpName="Credits" type="INTEGER" required="true" defaultValue="0"/>
    <column name="active" phpName="Active" type="BOOLEAN" size="1" required="true" defaultValue="true"/>
    <unique name="email">
      <unique-column name="email"/>
    </unique>
    <vendor type="mysql">
      <parameter name="Engine" value="InnoDB"/>
    </vendor>
    <behavior name="timestampable" />
  </table>
</database>
